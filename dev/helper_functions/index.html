<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Helper Functions · HighFrequencyCovariance.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">HighFrequencyCovariance.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">First Steps with HighFrequencyCovariance.jl</span><ul><li><a class="tocitem" href="../1_algorithms/">Algorithms</a></li><li><a class="tocitem" href="../2_data_structures/">Data Structures</a></li><li><a class="tocitem" href="../3_WritingCode/">Writing Code</a></li><li><a class="tocitem" href="../9_references/">References</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../functions/">Estimation Functions</a></li><li class="is-active"><a class="tocitem" href>Helper Functions</a><ul class="internal"><li><a class="tocitem" href="#Working-with-SortedDataFrame-structs"><span>Working with SortedDataFrame structs</span></a></li><li><a class="tocitem" href="#Working-with-CovarianceMatrix-structs"><span>Working with CovarianceMatrix structs</span></a></li><li><a class="tocitem" href="#Blocking-and-Regularisation-Functions"><span>Blocking and Regularisation Functions</span></a></li><li><a class="tocitem" href="#Monte-Carlo"><span>Monte Carlo</span></a></li><li><a class="tocitem" href="#For-getting-a-DataFrame-version-of-a-CovarianceMatrix-and-vice-versa."><span>For getting a DataFrame version of a CovarianceMatrix and vice versa.</span></a></li></ul></li><li><a class="tocitem" href="../internals/">Internal Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Helper Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Helper Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/master/docs/src/helper_functions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Helper-Functions"><a class="docs-heading-anchor" href="#Helper-Functions">Helper Functions</a><a id="Helper-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-Functions" title="Permalink"></a></h1><ul><li><a href="#StochasticIntegrals.ItoSet"><code>StochasticIntegrals.ItoSet</code></a></li><li><a href="#HighFrequencyCovariance.blockwise_estimation"><code>HighFrequencyCovariance.blockwise_estimation</code></a></li><li><a href="#HighFrequencyCovariance.combine_covariance_matrices"><code>HighFrequencyCovariance.combine_covariance_matrices</code></a></li><li><a href="#HighFrequencyCovariance.construct_matrix_from_eigen"><code>HighFrequencyCovariance.construct_matrix_from_eigen</code></a></li><li><a href="#HighFrequencyCovariance.cor2cov"><code>HighFrequencyCovariance.cor2cov</code></a></li><li><a href="#HighFrequencyCovariance.cov2cor"><code>HighFrequencyCovariance.cov2cor</code></a></li><li><a href="#HighFrequencyCovariance.cov2cor_and_vol"><code>HighFrequencyCovariance.cov2cor_and_vol</code></a></li><li><a href="#HighFrequencyCovariance.covariance"><code>HighFrequencyCovariance.covariance</code></a></li><li><a href="#HighFrequencyCovariance.dataframe_to_covariancematrix"><code>HighFrequencyCovariance.dataframe_to_covariancematrix</code></a></li><li><a href="#HighFrequencyCovariance.duration"><code>HighFrequencyCovariance.duration</code></a></li><li><a href="#HighFrequencyCovariance.generate_random_path"><code>HighFrequencyCovariance.generate_random_path</code></a></li><li><a href="#HighFrequencyCovariance.get_assets"><code>HighFrequencyCovariance.get_assets</code></a></li><li><a href="#HighFrequencyCovariance.get_correlation"><code>HighFrequencyCovariance.get_correlation</code></a></li><li><a href="#HighFrequencyCovariance.get_returns"><code>HighFrequencyCovariance.get_returns</code></a></li><li><a href="#HighFrequencyCovariance.get_volatility"><code>HighFrequencyCovariance.get_volatility</code></a></li><li><a href="#HighFrequencyCovariance.is_psd_matrix"><code>HighFrequencyCovariance.is_psd_matrix</code></a></li><li><a href="#HighFrequencyCovariance.make_nan_covariance_matrix"><code>HighFrequencyCovariance.make_nan_covariance_matrix</code></a></li><li><a href="#HighFrequencyCovariance.put_assets_into_blocks_by_trading_frequency"><code>HighFrequencyCovariance.put_assets_into_blocks_by_trading_frequency</code></a></li><li><a href="#HighFrequencyCovariance.rearrange"><code>HighFrequencyCovariance.rearrange</code></a></li><li><a href="#HighFrequencyCovariance.subset_to_tick"><code>HighFrequencyCovariance.subset_to_tick</code></a></li><li><a href="#HighFrequencyCovariance.subset_to_time"><code>HighFrequencyCovariance.subset_to_time</code></a></li><li><a href="#HighFrequencyCovariance.ticks_per_asset"><code>HighFrequencyCovariance.ticks_per_asset</code></a></li><li><a href="#HighFrequencyCovariance.valid_correlation_matrix"><code>HighFrequencyCovariance.valid_correlation_matrix</code></a></li><li><a href="#StochasticIntegrals.to_dataframe"><code>StochasticIntegrals.to_dataframe</code></a></li></ul><h2 id="Working-with-SortedDataFrame-structs"><a class="docs-heading-anchor" href="#Working-with-SortedDataFrame-structs">Working with SortedDataFrame structs</a><a id="Working-with-SortedDataFrame-structs-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-SortedDataFrame-structs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.get_assets" href="#HighFrequencyCovariance.get_assets"><code>HighFrequencyCovariance.get_assets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_assets(ts::SortedDataFrame, obs_to_include::Integer = 10)</code></pre><p>This returns a vector of all of the assets in the <code>SortedDataFrame</code> with at least some number of observations (10 by default).</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - The tick data.</li><li><code>obs_to_include</code> - An integer for the minimum number of ticks in <code>ts</code> needed for the function to include that asset.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Vector{Symbol}</code> with each asset.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L50-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.ticks_per_asset" href="#HighFrequencyCovariance.ticks_per_asset"><code>HighFrequencyCovariance.ticks_per_asset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ticks_per_asset(ts::SortedDataFrame, assets::Vector{Symbol} = get_assets(ts))</code></pre><p>Count the number of observations for each asset.</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - The tick data</li><li><code>assets</code> - A vector with asset <code>Symbol</code>s.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Dict</code> with the number of observations for each input asset.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L298-L307">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.duration" href="#HighFrequencyCovariance.duration"><code>HighFrequencyCovariance.duration</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">duration(ts::SortedDataFrame)</code></pre><p>The time elapsed between the first and the last tick in a <code>SortedDataFrame</code>.</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - Tick data.</li></ul><p><strong>Returns</strong></p><ul><li>A scalar representing this duration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L109-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.subset_to_tick" href="#HighFrequencyCovariance.subset_to_tick"><code>HighFrequencyCovariance.subset_to_tick</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">subset_to_tick(ts::SortedDataFrame, n::Integer)</code></pre><p>This subsets a <code>SortedDataFrame</code> to only the first n ticks.</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - Tick data.</li><li><code>n</code> - How many ticks to subset to.</li></ul><p><strong>Returns</strong></p><ul><li>A (smaller) <code>SortedDataFrame</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L72-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.subset_to_time" href="#HighFrequencyCovariance.subset_to_time"><code>HighFrequencyCovariance.subset_to_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">subset_to_time(ts::SortedDataFrame, totime::Real)</code></pre><p>This subsets a <code>SortedDataFrame</code> to only the first observations up until some time.</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - Tick data.</li><li><code>totime</code> - Up to what time.</li></ul><p><strong>Returns</strong></p><ul><li>A (smaller) <code>SortedDataFrame</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L93-L102">source</a></section></article><h2 id="Working-with-CovarianceMatrix-structs"><a class="docs-heading-anchor" href="#Working-with-CovarianceMatrix-structs">Working with CovarianceMatrix structs</a><a id="Working-with-CovarianceMatrix-structs-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-CovarianceMatrix-structs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.covariance" href="#HighFrequencyCovariance.covariance"><code>HighFrequencyCovariance.covariance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">covariance(cm::CovarianceMatrix, duration::Real)</code></pre><p>This makes a <code>Hermitian</code> matrix for the covariance matrix over some duration.</p><p><strong>Inputs</strong></p><ul><li><code>cm</code> - A <code>CovarianceMatrix</code> struct.</li><li><code>duration</code> - A duration. This should be in same units as used in estimating <code>cm</code>&#39;s volatilities.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Hermitian</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L50-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.get_correlation" href="#HighFrequencyCovariance.get_correlation"><code>HighFrequencyCovariance.get_correlation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_correlation(covar::CovarianceMatrix, asset1::Symbol, asset2::Symbol)</code></pre><p>Extract the correlation between two assets stored in a CovarianceMatrix.</p><p><strong>Inputs</strong></p><ul><li><code>covar</code> - A <code>CovarianceMatrix</code></li><li><code>asset1</code> - A <code>Symbol</code> representing an asset.</li><li><code>asset2</code> - A <code>Symbol</code> representing an asset.</li></ul><p><strong>Returns</strong></p><ul><li>A Scalar (the correlation coefficient).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L227-L237">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.get_volatility" href="#HighFrequencyCovariance.get_volatility"><code>HighFrequencyCovariance.get_volatility</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_volatility(covar::CovarianceMatrix, asset1::Symbol)</code></pre><p>Get the volatility for a stock from a <code>CovarianceMatrix</code>.</p><p><strong>Inputs</strong></p><ul><li><code>covar</code> - A <code>CovarianceMatrix</code></li><li><code>asset1</code> - A <code>Symbol</code> representing an asset.</li></ul><p><strong>Returns</strong></p><ul><li>A Scalar (the volatility).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L245-L254">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.make_nan_covariance_matrix" href="#HighFrequencyCovariance.make_nan_covariance_matrix"><code>HighFrequencyCovariance.make_nan_covariance_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">make_nan_covariance_matrix(labels::Vector{Symbol})</code></pre><p>This makes an empty <code>CovarianceMatrix</code> struct with all volatilities and correlations being NaNs.</p><p><strong>Inputs</strong></p><ul><li><code>labels</code> - The names of the asset names for this (empty) <code>CovarianceMatrix</code>.</li></ul><p><strong>Returns</strong></p><ul><li>An (empty) <code>CovarianceMatrix</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L169-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.combine_covariance_matrices" href="#HighFrequencyCovariance.combine_covariance_matrices"><code>HighFrequencyCovariance.combine_covariance_matrices</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">combine_covariance_matrices(vect::Vector{CovarianceMatrix{T}},
                            cor_weights::Vector{&lt;:Real} = repeat([1.0], length(vect)),
                            vol_weights::Vector{&lt;:Real} = cor_weights) where T&lt;:Real</code></pre><p>Combines a vector of <code>CovarianceMatrix</code> structs into one <code>CovarianceMatrix</code> struct.</p><p><strong>Inputs</strong></p><ul><li><code>vect</code> - A vector of <code>CovarianceMatrix</code> structs.</li><li><code>cor_weights</code> - A vector for how much to weight the correlations from each covariance matrix (by default they will be equalweighted).</li><li><code>vol_weights</code> - A vector for how much to weight the volatilities from each covariance matrix (by default they will be equalweighted).</li></ul><p><strong>Returns</strong></p><ul><li>A matrix and a vector of labels for each row/column of the matrix.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L128-L140">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.rearrange" href="#HighFrequencyCovariance.rearrange"><code>HighFrequencyCovariance.rearrange</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">rearrange(cm::CovarianceMatrix, labels::Vector{Symbol})</code></pre><p>Rearrange the order of labels in a <code>CovarianceMatrix</code>.</p><p><strong>Takes</strong></p><ul><li><code>cm</code> - A <code>CovarianceMatrix</code>.</li><li><code>labels</code> - A <code>Vector</code> of labels.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>CovarianceMatrix</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L164-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.cov2cor" href="#HighFrequencyCovariance.cov2cor"><code>HighFrequencyCovariance.cov2cor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cov2cor(mat::AbstractMatrix)</code></pre><p>Converts a matrix (representing a covariance matrix) into a <code>Hermitian</code> correlation matrix and a vector of standard deviations.</p><p><strong>Inputs</strong></p><ul><li><code>cor</code> - A matrix.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Hermitian</code>.</li><li>A <code>Vector</code> of standard deviations (not volatilities).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L2-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.cor2cov" href="#HighFrequencyCovariance.cor2cov"><code>HighFrequencyCovariance.cor2cov</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cor2cov(cor::AbstractMatrix,sdevs::Vector{&lt;:Real})</code></pre><p>Converts a correlation matrix and some standard deviations into a <code>Hermitian</code> covariance matrix.</p><p><strong>Inputs</strong></p><ul><li><code>cor</code> - A correlation matrix.</li><li><code>sdevs</code> - A vector of standard deviations (not volatilities - use sdevs = sqrt(duration) .* volatilities to convert if necessary).</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Hermitian</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L35-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.cov2cor_and_vol" href="#HighFrequencyCovariance.cov2cor_and_vol"><code>HighFrequencyCovariance.cov2cor_and_vol</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cov2cor_and_vol(mat::AbstractMatrix, duration::Real)</code></pre><p>Converts a matrix (representing a covariance matrix) into a <code>Hermitian</code> correlation matrix and a vector of volatilities.</p><p><strong>Inputs</strong></p><ul><li><code>cor</code> - A correlation matrix.</li><li><code>duration</code> - The duration that the covariance matrix is for.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Hermitian</code>.</li><li>A <code>Vector</code> of volatilities.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L19-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.construct_matrix_from_eigen" href="#HighFrequencyCovariance.construct_matrix_from_eigen"><code>HighFrequencyCovariance.construct_matrix_from_eigen</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">construct_matrix_from_eigen(eigenvalues::Vector{&lt;:Real},
                            eigenvectors::Matrix{&lt;:Real})</code></pre><p>Constructs a matrix from its eigenvalue decomposition.</p><p><strong>Inputs</strong></p><ul><li><code>eigenvalues</code> - A vector of eigenvalues.</li><li><code>eigenvectors</code> - A matrix of eigenvectors. The i&#39;th column corresponds to the i&#39;th eigenvalue.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Matrix</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L65-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.get_returns" href="#HighFrequencyCovariance.get_returns"><code>HighFrequencyCovariance.get_returns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_returns(dd::DataFrame; rescale_for_duration::Bool = false)</code></pre><p>Converts a long format <code>DataFrame</code> of prices into a <code>DataFrame</code> of returns.</p><p><strong>Inputs</strong></p><ul><li><code>dd</code> - A <code>DataFrame</code> with a column called :Time and all other columns being asset prices in each period.</li><li><code>rescale_for_duration</code> - Should returns be rescaled to reflect a common time interval.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>DataFrame</code> of returns.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/01_helpers.jl#L95-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.valid_correlation_matrix" href="#HighFrequencyCovariance.valid_correlation_matrix"><code>HighFrequencyCovariance.valid_correlation_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">valid_correlation_matrix(mat::Hermitian)
valid_correlation_matrix(covar::CovarianceMatrix)</code></pre><p>Test if a <code>Hermitian</code> matrix is a valid correlation matrix. This is done by testing if it is psd, if it has a unit diagonal and if all other elements are less than one. If a <code>Hermitian</code> is input then it will be tested. If a <code>CovarianceMatrix</code> is input then its correlation matrix will be tested.</p><p><strong>Inputs</strong></p><ul><li>A <code>Hermitian</code> matrix or a <code>CovarianceMatrix</code></li></ul><p><strong>Returns</strong></p><ul><li>A <code>Bool</code> that is true if mat is a valid correlation matrix and false if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L279-L289">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.is_psd_matrix" href="#HighFrequencyCovariance.is_psd_matrix"><code>HighFrequencyCovariance.is_psd_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">is_psd_matrix(mat::Hermitian)
is_psd_matrix(covar::CovarianceMatrix)</code></pre><p>Test if a matrix is psd (Positive Semi-Definite). This is done by seeing if all eigenvalues are positive. If a <code>Hermitian</code> is input then it will be tested. If a <code>CovarianceMatrix</code> is input then its correlation matrix will be tested.</p><p><strong>Inputs</strong></p><ul><li>A <code>Hermitian</code> matrix or a <code>CovarianceMatrix</code></li></ul><p><strong>Returns</strong></p><ul><li>A <code>Bool</code> that is true if mat is psd and false if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/00_Structs.jl#L261-L271">source</a></section></article><h2 id="Blocking-and-Regularisation-Functions"><a class="docs-heading-anchor" href="#Blocking-and-Regularisation-Functions">Blocking and Regularisation Functions</a><a id="Blocking-and-Regularisation-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Blocking-and-Regularisation-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.put_assets_into_blocks_by_trading_frequency" href="#HighFrequencyCovariance.put_assets_into_blocks_by_trading_frequency"><code>HighFrequencyCovariance.put_assets_into_blocks_by_trading_frequency</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">put_assets_into_blocks_by_trading_frequency(ts::SortedDataFrame,
                                            obs_multiple_for_new_block::Real, func::Symbol,
                                            optional_parameters::NamedTuple = NamedTuple())</code></pre><p>This makes a DataFrame that describes how to estimate the covariance matrix blockwise.</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - The tick data.</li><li><code>obs_multiple_for_new_block</code> - The relative number of ticks needed before a new block is made. So if this is 1.2 that means a new group is made when one asset has 20% or more ticks than the slowest traded asset in the previous block.</li><li><code>func</code> - A symbol representing the covariance estimation function to be used.</li><li><code>optional_parameters</code> - Optional parameters to be used in the <code>func</code> function.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>DataFrame</code> representing what estimations should be performed. The order of rows in the <code>DataFrame</code> shows the order of estimation.</li></ul><p><strong>References</strong></p><p>Hautsch, N., Kyj, L.M. and Oomen, R.C.A. (2012), A blocking and regularization approach to high‐dimensional realized covariance estimation. J. Appl. Econ., 27: 625-645</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/40_Blocking.jl#L46-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.blockwise_estimation" href="#HighFrequencyCovariance.blockwise_estimation"><code>HighFrequencyCovariance.blockwise_estimation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">blockwise_estimation(ts::SortedDataFrame, blocking_frame::DataFrame)</code></pre><p>Run a series of covariance estimations and combine the results. Two things should be input, a SortedDataFrame with the price update data and a dataframe describing what estimations should be performed. This should be of the same form as is output by <code>put_assets_into_blocks_by_trading_frequency</code> (although the actual estimations can be customised to something different as to what that function outputs).</p><p><strong>Inputs</strong></p><ul><li><code>ts</code> - The tick data.</li><li><code>blocking_frame</code> - A <code>DataFrame</code> representing what estimations to do and in what order. This is often be one generated by the <code>put_assets_into_blocks_by_trading_frequency</code> function (and potentially then modified).</li></ul><p><strong>Returns</strong></p><ul><li>A <code>CovarianceMatrix</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/40_Blocking.jl#L78-L89">source</a></section></article><h2 id="Monte-Carlo"><a class="docs-heading-anchor" href="#Monte-Carlo">Monte Carlo</a><a id="Monte-Carlo-1"></a><a class="docs-heading-anchor-permalink" href="#Monte-Carlo" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.generate_random_path" href="#HighFrequencyCovariance.generate_random_path"><code>HighFrequencyCovariance.generate_random_path</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">generate_random_path(dimensions::Integer, ticks::Integer; syncronous::Bool = false
                     twister::MersenneTwister = MersenneTwister(1), minvol::Real = 0.0,
                     maxvol::Real = 0.02, min_refresh_rate::Real = 1.0,
                     max_refresh_rate::Real = 5.0, min_noise_var::Real = 0.0,
                     max_noise_var::Real = 0.01, assets::Union{Vector,Missing} = missing,
                     brownian_corr_matrix::Union{Hermitian,Missing} = missing,
                     vols::Union{Vector,Missing} = missing)</code></pre><p>Generate a random path of price updates with a specified number of dimensions and ticks. There are options for whether the data is syncronous or asyncronous, the volatility of the price processes, the refresh rate on the (exponential) arrival times of price updates, the minimum and the maximum microstructure noises.</p><p><strong>Inputs</strong></p><ul><li><code>dimensions</code> - The number of assets.</li><li><code>ticks</code> - The number of ticks to produce.</li><li><code>syncronous</code> - Should ticks be syncronous (for each asset) or asyncronous.</li><li><code>twister</code> - The MersenneTwister used for RNG.</li><li><code>minvol</code> - The minimum volatility in sampling (only used if vols is missing).</li><li><code>maxvol</code> - The maximum volatility in sampling (only used if vols is missing).</li><li><code>min_refresh_rate</code> - The minimum refresh rate in sampling.</li><li><code>max_refresh_rate</code> - The maximum refresh rate in sampling.</li><li><code>min_noise_var</code>  - The minimum assetwise microstructure noise variance.</li><li><code>max_noise_var</code>  - The minimum assetwise microstructure noise variance.</li><li><code>assets</code> - The names of the assets that you want to use. The length of this must be equal to the <code>dimensions</code> input.</li><li><code>brownian_corr_matrix</code> - The correlation matrix to use. This is sampled from the Inverse Wishart distribution if none is input.</li><li><code>vols</code> - The correlation matrix to use. This is sampled from the Inverse Wishart distribution if none is input.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>SortedDataFrame</code> of tick data.</li><li>A <code>CovarianceMatrix</code> representing the true data generation process used in making the tick data.</li><li>A <code>Dict</code> of microstructure noise variances for each asset.</li><li>A <code>Dict</code> of update rates for each asset.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/03_MonteCarlo.jl#L3-L33">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StochasticIntegrals.ItoSet" href="#StochasticIntegrals.ItoSet"><code>StochasticIntegrals.ItoSet</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ItoSet(covariance_matrix::CovarianceMatrix{&lt;:Real})</code></pre><p>Convert a <code>CovarianceMatrix</code> into an <code>ItoSet</code> from the StochasticIntegrals package. This package can then be used to do things like generate draws from the Multivariate Gaussian corresponding to the covariance matrix and other things.</p><p><strong>Inputs</strong></p><ul><li><code>covariance_matrix</code> - The <code>CovarianceMatrix</code> that you want to convert into an <code>StochasticIntegrals.ItoSet</code></li></ul><p><strong>Returns</strong></p><ul><li>A <code>StochasticIntegrals.ItoSet</code> struct.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/03_MonteCarlo.jl#L69-L79">source</a></section></article><h2 id="For-getting-a-DataFrame-version-of-a-CovarianceMatrix-and-vice-versa."><a class="docs-heading-anchor" href="#For-getting-a-DataFrame-version-of-a-CovarianceMatrix-and-vice-versa.">For getting a DataFrame version of a CovarianceMatrix and vice versa.</a><a id="For-getting-a-DataFrame-version-of-a-CovarianceMatrix-and-vice-versa.-1"></a><a class="docs-heading-anchor-permalink" href="#For-getting-a-DataFrame-version-of-a-CovarianceMatrix-and-vice-versa." title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="StochasticIntegrals.to_dataframe" href="#StochasticIntegrals.to_dataframe"><code>StochasticIntegrals.to_dataframe</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">to_dataframe(covar::CovarianceMatrix, othercols::Dict = Dict{Symbol,Any}();
             delete_duplicate_correlations::Bool = true)</code></pre><p>Convert a CovarianceMatrix to a <code>DataFrame</code> format.</p><p><strong>Inputs</strong></p><ul><li><code>covar</code> - The <code>CovarianceMatrix</code></li><li><code>othercols</code> - This adds columns to the <code>DataFrame</code>. For instance if it is Dict{Symbol,String}([:pc] .=&gt; [&quot;Fred&#39;s PC&quot;]), then there will be a column indicating that this estimation was done on Fred&#39;s PC.</li><li><code>delete_duplicate_correlations</code> - Should the unnecessary correlations be included (as correlation matrices are symmetric half the entries duplicate information).</li></ul><p><strong>Returns</strong></p><ul><li>A <code>DataFrame</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/04_Serialisation.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="HighFrequencyCovariance.dataframe_to_covariancematrix" href="#HighFrequencyCovariance.dataframe_to_covariancematrix"><code>HighFrequencyCovariance.dataframe_to_covariancematrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">dataframe_to_covariancematrix(dd::DataFrame)</code></pre><p>Convert a <code>CovarianceMatrix</code> to a <code>DataFrame</code> format.</p><p><strong>Inputs</strong></p><ul><li><code>dd</code> - A <code>DataFrame</code> of the form generated by the <code>to_dataframe</code> function.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>CovarianceMatrix</code> struct.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-baumann/HighFrequencyCovariance.jl/blob/3253fa699ea2e6e1b87de9e2ba662239924269b7/src/04_Serialisation.jl#L31-L39">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../functions/">« Estimation Functions</a><a class="docs-footer-nextpage" href="../internals/">Internal Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 7 August 2021 17:38">Saturday 7 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
